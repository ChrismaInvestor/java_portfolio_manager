import{h as F,k as E,r as x,l as _,m as G,_ as T,j as t,n as h,o as P,p as M,q as V,t as U,C as W,s as q,v as A,w as D,x as g,y as C,z,L as k,A as H,E as J,F as K,H as Q,R as f,c as X,d as Y,G as r,T as b,I as $,b as Z,B as ee,g as R,J as te,K as se}from"./index-bilapX43.js";import{L as ae,d as oe}from"./Save-DdyEFuUg.js";const ne=["className","component"];function re(e={}){const{themeId:s,defaultTheme:a,defaultClassName:o="MuiBox-root",generateClassName:n}=e,i=F("div",{shouldForwardProp:l=>l!=="theme"&&l!=="sx"&&l!=="as"})(E);return x.forwardRef(function(u,d){const m=_(a),v=G(u),{className:j,component:y="div"}=v,p=T(v,ne);return t.jsx(i,h({as:y,ref:d,className:P(j,n?n(o):o),theme:s&&m[s]||m},p))})}const ie=M("MuiBox",["root"]),ce=ie,le=V(),de=re({themeId:U,defaultTheme:le,defaultClassName:ce.root,generateClassName:W.generate}),ue=de,pe=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],xe=(e,s)=>{const{ownerState:a}=e;return[s.root,a.dense&&s.dense,a.alignItems==="flex-start"&&s.alignItemsFlexStart,a.divider&&s.divider,!a.disableGutters&&s.gutters]},fe=e=>{const{alignItems:s,classes:a,dense:o,disabled:n,disableGutters:i,divider:c,selected:l}=e,d=K({root:["root",o&&"dense",!i&&"gutters",c&&"divider",n&&"disabled",s==="flex-start"&&"alignItemsFlexStart",l&&"selected"]},Q,a);return h({},a,d)},me=q(A,{shouldForwardProp:e=>D(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:xe})(({theme:e,ownerState:s})=>h({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${g.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:C(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${g.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:C(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${g.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:C(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:C(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${g.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${g.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},s.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},s.alignItems==="flex-start"&&{alignItems:"flex-start"},!s.disableGutters&&{paddingLeft:16,paddingRight:16},s.dense&&{paddingTop:4,paddingBottom:4})),ge=x.forwardRef(function(s,a){const o=z({props:s,name:"MuiListItemButton"}),{alignItems:n="center",autoFocus:i=!1,component:c="div",children:l,dense:u=!1,disableGutters:d=!1,divider:m=!1,focusVisibleClassName:v,selected:j=!1,className:y}=o,p=T(o,pe),L=x.useContext(k),N=x.useMemo(()=>({dense:u||L.dense||!1,alignItems:n,disableGutters:d}),[n,L.dense,u,d]),B=x.useRef(null);H(()=>{i&&B.current&&B.current.focus()},[i]);const O=h({},o,{alignItems:n,dense:N.dense,disableGutters:d,divider:m,selected:j}),I=fe(O),w=J(B,a);return t.jsx(k.Provider,{value:N,children:t.jsx(me,h({ref:w,href:p.href||p.to,component:(p.href||p.to)&&c==="div"?"button":c,focusVisibleClassName:P(I.focusVisible,v),ownerState:O,className:P(I.root,y)},p,{classes:I,children:l}))})}),he=ge,S=x.createContext({});function ve(e,s){switch(s.type){case"countUpdate":return{...e,updateCount:e.updateCount+1};default:throw new Error}}function Ce(){const e=f.useRef(null),{dispatch:s}=f.useContext(S),[a,o]=f.useState({name:"",description:"",account:""}),n=c=>{const{name:l,value:u}=c.target;o(d=>({...d,[l]:u}))},i=X({mutationFn:()=>fetch(ee+"portfolio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})});return f.useMemo(()=>{s&&s({type:"countUpdate"})},[i.status==="success"]),t.jsx(Y,{sx:{m:2,p:2},children:t.jsx("form",{ref:e,children:t.jsxs(r,{container:!0,spacing:2,children:[t.jsx(r,{item:!0,xs:12,children:t.jsx(b,{variant:"h5",children:"新增投资组合"})}),t.jsx(r,{item:!0,xs:12,children:t.jsx($,{label:"名称",fullWidth:!0,placeholder:"请输入投资组合名称",name:"name",value:a.name,onChange:n,required:!0})}),t.jsx(r,{item:!0,xs:12,children:t.jsx($,{label:"描述",fullWidth:!0,placeholder:"请描述该投资组合",name:"description",value:a.description,onChange:n,required:!0})}),t.jsx(r,{item:!0,xs:12,children:t.jsx($,{label:"关联账户",fullWidth:!0,placeholder:"请输入在券商的关联账户",name:"account",value:a.account,onChange:n,required:!0})}),t.jsx(r,{item:!0,xs:12,children:i.isLoading?t.jsx(ae,{loading:i.isLoading,loadingPosition:"start",startIcon:t.jsx(oe,{}),variant:"contained",disabled:!0,children:t.jsx("span",{children:"创建中"})}):t.jsx(Z,{variant:"contained",sx:{width:"25%"},onClick:()=>{var c;(c=e.current)!=null&&c.reportValidity()&&i.mutate()},children:"新增"})})]})})})}function be(e){const{name:s,description:a,account:o}=e;return t.jsxs(r,{container:!0,children:[t.jsx(r,{item:!0,xs:6,children:t.jsxs(R,{spacing:1,children:[t.jsx(b,{children:t.jsx("strong",{children:s})}),t.jsx(b,{children:o})]})}),t.jsx(r,{item:!0,xs:6,children:t.jsx(R,{spacing:1,children:t.jsx(b,{variant:"body2",children:a})})})]})}function je(){const[e,s]=f.useState([]),{state:a}=f.useContext(S);return f.useEffect(()=>{te().then(o=>{o&&s(o)})},[a.updateCount]),t.jsx(ue,{sx:{p:2},children:t.jsx(R,{spacing:1,children:t.jsx(se,{disablePadding:!0,children:e.map((o,n)=>t.jsx(he,{sx:{border:1,borderColor:"#e5e7eb"},children:t.jsx(be,{name:o.name,description:o.description,account:o.account})},n))})})})}const ye={updateCount:0};function $e(){const[e,s]=x.useReducer(ve,ye);return t.jsx(S.Provider,{value:{state:e,dispatch:s},children:t.jsxs(r,{container:!0,spacing:2,children:[t.jsx(r,{item:!0,xs:6,children:t.jsx(je,{})}),t.jsx(r,{item:!0,xs:6,children:t.jsx(Ce,{})})]})})}export{$e as default};
